<!doctype html><html lang=zh-CN><head><title>理解Python的切片表示 - 世界的过客</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The HTML5 Herald"><meta name=author content="Jay Lau"><meta property="og:title" content="理解Python的切片表示"><meta property="og:description" content="原文understanding-slice-notaion
它非常简单:
# 译者：切片用数学的区间表示的说法都是左开右闭的 [),即含左不含右 a[start:stop] # 取从start到stop-1 a[start:] # 取start到a的最后一个元素 a[:stop] # 取第0个到stop-1个元素 a[:] # 复制整个list 还有个step(步长)的值,可以一起用:"><meta property="og:type" content="article"><meta property="og:url" content="https://laujay.com/posts/slice/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-08-30T10:20:13+08:00"><meta property="article:modified_time" content="2019-08-30T10:20:13+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="理解Python的切片表示"><meta name=twitter:description content="原文understanding-slice-notaion
它非常简单:
# 译者：切片用数学的区间表示的说法都是左开右闭的 [),即含左不含右 a[start:stop] # 取从start到stop-1 a[start:] # 取start到a的最后一个元素 a[:stop] # 取第0个到stop-1个元素 a[:] # 复制整个list 还有个step(步长)的值,可以一起用:"><meta name=generator content="Hugo 0.121.1"><link rel="shortcut icon" href=https://laujay.com/img/favicon.ico><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://laujay.com/fontawesome/css/all.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"><link rel=stylesheet type=text/css href=https://laujay.com/css/styles.css></head><body><div id=container><header><h1><a href=https://laujay.com/>世界的过客</a></h1><ul id=social-media><li><a href=https://github.com/lau-jay title=GitHub><i class="fab fa-github fa-lg"></i></a></li></ul><p><em>每个人获得的东西都恰好是他值得获得的东西</em></p></header><nav><ul><li><a href=https://laujay.com/about><i class="fa-li fa fa-lg"></i><span>About</span></a></li><li><a href=https://laujay.com/categories><i class="fa-li fa fa-lg"></i><span>Categories</span></a></li><li><a href=https://laujay.com/tags><i class="fa-li fa fa-lg"></i><span>Tags</span></a></li></ul></nav><main><article><h1>理解Python的切片表示</h1><aside><ul><li><time class=post-date datetime=2019-08-30T10:20:13+08:00>Aug 30, 2019</time></li><li>Categories:
<em><a href=https://laujay.com/categories/python>python</a></em></li><li><em><a href=https://laujay.com/tags/translation>#translation</a></em></li><li>One minute read</li></ul></aside><div class=featured_image><a href=https://laujay.com/posts/slice/ title=理解Python的切片表示><img src></a></div><p>原文<a href=https://stackoverflow.com/questions/509211/understanding-slice-notation>understanding-slice-notaion</a></p><p>它非常简单:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 译者：切片用数学的区间表示的说法都是左开右闭的 [),即含左不含右</span>
</span></span><span style=display:flex><span>a[start:stop] <span style=color:#75715e># 取从start到stop-1</span>
</span></span><span style=display:flex><span>a[start:] <span style=color:#75715e># 取start到a的最后一个元素</span>
</span></span><span style=display:flex><span>a[:stop] <span style=color:#75715e># 取第0个到stop-1个元素</span>
</span></span><span style=display:flex><span>a[:] <span style=color:#75715e># 复制整个list</span>
</span></span></code></pre></div><p>还有个step(步长)的值,可以一起用:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a[start:stop:step] <span style=color:#75715e># 从start开始包含start，到stop-1为止，取每隔step个的元素</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 译者注:</span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>a[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>2</span>] <span style=color:#f92672>==</span> a[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>3</span>]
</span></span></code></pre></div><p>要记住的关键点是<code>:stop</code>值表示不在所选中的元素中的第一值,所以stop和start他们之差
是选择的元素的数量(如果step是默认值1)</p><p>另一个特征是start或stop可能是负数，这意味着它从list的末尾而不是开头开始计数。所以:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#75715e># 最后一个元素</span>
</span></span><span style=display:flex><span>a[<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>:] <span style=color:#75715e># 最后两个元素</span>
</span></span><span style=display:flex><span>a[:<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>] <span style=color:#75715e># 去除最后两个元素的数组</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 译者注: 其实就是 a[:len(a) + (-2)]</span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>]
</span></span><span style=display:flex><span>a[:<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>] <span style=color:#f92672>==</span> [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>]
</span></span></code></pre></div><p>同样，step可能是负数：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a[::<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]    <span style=color:#75715e># 复制整个数组，以倒序复制</span>
</span></span><span style=display:flex><span>a[<span style=color:#ae81ff>1</span>::<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]   <span style=color:#75715e># 复制从index为1往前的到开头，倒序复制</span>
</span></span><span style=display:flex><span>a[:<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]  <span style=color:#75715e># 复制从-3开始结尾的元素, 倒序复制</span>
</span></span><span style=display:flex><span>a[<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>::<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]  <span style=color:#75715e># 复制从-3到开头的元素，倒序复制</span>
</span></span></code></pre></div><p>Python对程序员很友好，如果你list越界了。例如，如果取a[:-2]但是a只有一个元素，你会得到
一个空的list而不是一个错误。有时候你更喜欢错误，而不是这种隐晦的结果，那么你必须要知道
会有这种情况。</p><h3 id=与slice对象的关系>与slice对象的关系</h3><p>切片运算符 <code>[]</code> 实际上在上面的代码中通过 <code>:</code> 使用了一个slice()对象(只在[]内有效)，
例如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a[start:stop:step]
</span></span></code></pre></div><p>等价于</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a[slice(start, stop, step)]
</span></span></code></pre></div><p>Slice对象根据不同的参数会有不同的行为,跟range非常类似，比如 <code>slice(stop)</code> 和
<code>slice(start, stop[, step])</code>。如果要跳过给定的参数，可以使用
<code>None</code>, 例如 <code>a[start:]</code> 等价于 <code>a[slice(start, None)]</code> 或者 <code>a[::1]</code> 等价于
<code>a[slice(None, None, -1)]</code></p><p>虽然基于 <code>:</code> 符号的对于简单切片非常有用，但是显式使用slice()对象简化了使用切片时自动生成slice()对象。</p></article><section class=post-nav><ul><li><a href=https://laujay.com/posts/three-years/><i class="fa fa-chevron-circle-left"></i> Three Years</a></li><li><a href=https://laujay.com/posts/from-hexo-to-hugo/>From Hexo to Hugo <i class="fa fa-chevron-circle-right"></i></a></li></ul></section><section class=comments-block><button id=show-comments style=display:none><i class="fa fa-comments"></i> Add/View Comments</button></section><section id=disqus_thread></section><script>(function(){if(window.location.hostname=="localhost")return;var t,n=!1,o="lau-jay",s=document.getElementById("show-comments"),i=!0,a=null;if(a)return;s.style.display="",i?e():s.addEventListener("click",e,!1);function e(){if(!n){n=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+o+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e),document.getElementById("show-comments").style.display="none"}}t=window.location.hash.substr(1),t.length>8&&t.substring(0,8)=="comment-"&&e(),/bot|google|baidu|bing|msn|duckduckgo|slurp|yandex/i.test(navigator.userAgent)&&e()})()</script></main><footer><h6>Copyright © 2016 ~ 2023 - Jay Lau|Theme by <a href=https://github.com/funkydan2/hugo-kiera>kiera</a> |
Rendered by <a href=https://gohugo.io title=Hugo>Hugo</a> |
<a href=https://laujay.com/index.xml>Subscribe</a></h6></footer></div><script src=https://laujay.com/js/scripts.js></script><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-91611718-2","auto"),ga("send","pageview"))</script></body></html>