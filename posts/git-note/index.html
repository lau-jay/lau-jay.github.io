<!doctype html><html lang=zh-CN><head><title>Git手记 - 世界的过客</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The HTML5 Herald"><meta name=author content="Jay Lau"><meta property="og:title" content="Git手记"><meta property="og:description" content="经常碰到提交信息写错&mldr;或者commit后临时又要添加文件的操作? 那么可以这样： 先提交forgotten_file"><meta property="og:type" content="article"><meta property="og:url" content="https://laujay.com/posts/git-note/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-07-10T18:32:28+08:00"><meta property="article:modified_time" content="2016-07-10T18:32:28+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git手记"><meta name=twitter:description content="经常碰到提交信息写错&mldr;或者commit后临时又要添加文件的操作? 那么可以这样： 先提交forgotten_file"><meta name=generator content="Hugo 0.121.1"><link rel="shortcut icon" href=https://laujay.com/img/favicon.ico><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://laujay.com/fontawesome/css/all.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"><link rel=stylesheet type=text/css href=https://laujay.com/css/styles.css></head><body><div id=container><header><h1><a href=https://laujay.com/>世界的过客</a></h1><ul id=social-media><li><a href=https://github.com/lau-jay title=GitHub><i class="fab fa-github fa-lg"></i></a></li></ul><p><em>每个人获得的东西都恰好是他值得获得的东西</em></p></header><nav><ul><li><a href=https://laujay.com/about><i class="fa-li fa fa-lg"></i><span>About</span></a></li><li><a href=https://laujay.com/categories><i class="fa-li fa fa-lg"></i><span>Categories</span></a></li><li><a href=https://laujay.com/tags><i class="fa-li fa fa-lg"></i><span>Tags</span></a></li></ul></nav><main><article><h1>Git手记</h1><aside><ul><li><time class=post-date datetime=2016-07-10T18:32:28+08:00>Jul 10, 2016</time></li><li>Categories:
<em><a href=https://laujay.com/categories/tool>tool</a></em></li><li><em><a href=https://laujay.com/tags/git>#git</a></em></li><li>One minute read</li></ul></aside><div class=featured_image><a href=https://laujay.com/posts/git-note/ title=Git手记><img src></a></div><h2 id=经常碰到提交信息写错或者commit后临时又要添加文件的操作>经常碰到提交信息写错&mldr;或者commit后临时又要添加文件的操作?</h2><p>那么可以这样：
先提交forgotten_file</p><pre><code>$ git  add forgoten_file
</code></pre><p>完了再</p><pre><code>$ git commit --amend
</code></pre><p>这样就可以把忘记的补上了，同时还可以修改说明</p><p><code>git commit --amend</code>命令需要的是提交的文件快照和之前一样，</p><p>所以上面的添加文件要在<code>git commit</code>之前。</p><h2 id=总有些文件会一不小心add进暂存区内取消暂存区的文件>总有些文件会一不小心add进暂存区内，取消暂存区的文件?</h2><p>在git status状态会有相应的信息提示，是git reset HEAD</p><h2 id=已经commit了需要取消跟踪>已经commit了，需要取消跟踪？</h2><p>总有不小心跟踪了不该跟踪的文件的时候，这个时候需要从cached删除文件
<code>git rm --cached file</code>就派上用场了，如果是整个目录，那么这时候
可以参考rm命令的参数。。 -rf 都派上用场了你没看错。。
<code>git rm -r --cached files/</code>极其好用。。整个文件夹都被干掉了。</p><h2 id=公司变土豪了买github私有库了>公司变土豪了，买github私有库了？</h2><p>转换仓库，从gitlab到github</p><p><code>git remote add upstream ssh://git@gitlab.xx.:workspace/project/pyclear.git</code>
<code>git remote set-url origin git@github.com:xxx/pyclear.git</code></p><p>note: .git前的pyclear是Repositories，别误解</p><h2 id=想做点commit点省的误删但是那么多commit又很烦>想做点commit点省的误删，但是那么多commit又很烦？</h2><p>最近从<a href=http://ajucs.com>阿驹</a>那学了一招</p><pre><code>git rebase -i 32db1a7e1....
</code></pre><p>先<code>git log</code>找到你不想要保留的之前那个的hash，然后使用上面这条命令。
就能进入一个编辑状态，然后再依据编辑状态的提示处理就ok了。很简单的。</p><h2 id=经常忘记你对当前的代码干了啥git操作>经常忘记你对当前的代码干了啥git操作?</h2><p>使用版本管理工具经常发生的一件事是，你对代码干了啥可以清楚的知道，但是
维护过程中你使用了什么git操作，不知道了。这时候有几个做法，一个是history命令
可以看出你之前的操作，但是如果时间久一点，那么命令一多你就难找了。
<code>git reflog</code>
可以列出你之前的所有git操作，但是这个也是有时限的，好像是一个月，不过已经够了。</p><h2 id=代码出bug了不知道谁干的>代码出bug了。不知道谁干的？</h2><p>有时候会有冲突说，这bug是xxx写的，然后xxx不服。有版本管理很简单，
能精确到某一行代码的作者是谁。
<code>git blame file</code>
就能知道谁干的了。</p><h2 id=查看log想倒过来>查看log想倒过来？</h2><p>看代码的时候我喜欢一个commit看过去，但是有些commit多了log会很长于是log的参数
<code>--reverse</code>就派上用场了:
<code>git log --reverse</code>
这命令会把commit按时间线从第一个开始递增展示</p><h2 id=只拉某一个分支>只拉某一个分支</h2><p>由于我将博客的md文件放在github博客仓库的dev分支，在外的时候不想把build好的html也搞下来所以要指定clone分支
<code>git clone -b &lt;branch> &lt;remote_repo></code></p><h2 id=分支重命名>分支重命名</h2><p>重命名分支
<code>git branch -m &lt;oldname> &lt;newname></code>
重命名当前分支
<code>git branch -m &lt;newname></code></p><h2 id=命令行删除远程分支>命令行删除远程分支</h2><p>查看远程分支
<code>git branch -r </code>删除远程分支
<code>git push origin :want_delete_branch_name</code></p><h2 id=拆分子模块并修改依赖>拆分子模块，并修改依赖</h2><p><code>git submodule add 仓库地址 路径</code></p><p>git clone 的工程带有submodule时,因为并不会自动去拉取子模块
需要执行：
<code>git submodule update --init --recursive</code></p><h2 id=gitignore的写法>.gitignore的写法</h2><ul><li>所有空行或者以注释符号<code>#</code>开头的都会被Git忽略</li><li>可以使用标准的glob模式匹配(shell所使用的简化略的正则表达式)</li><li>匹配模式最后跟反斜杠(<code>/</code>)说明要忽略的是目录</li><li>要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号取反</li></ul><h2 id=同步fork库>同步fork库</h2><p>经常会记不住同步的方式，特地记录下其实很简单
<code>git remote add upstream URL</code>
<code>git fetch upstream</code>
<code>git merge upstraem/upstream</code></p></article><section class=post-nav><ul><li><a href=https://laujay.com/posts/ubuntu-bits-complie-bits-assembly/><i class="fa fa-chevron-circle-left"></i> Ubuntu Bits Complie Bits Assembly</a></li><li><a href=https://laujay.com/posts/docker-basic/>Docker基本使用 <i class="fa fa-chevron-circle-right"></i></a></li></ul></section><section class=comments-block><button id=show-comments style=display:none><i class="fa fa-comments"></i> Add/View Comments</button></section><section id=disqus_thread></section><script>(function(){if(window.location.hostname=="localhost")return;var t,n=!1,o="lau-jay",s=document.getElementById("show-comments"),i=!0,a=null;if(a)return;s.style.display="",i?e():s.addEventListener("click",e,!1);function e(){if(!n){n=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+o+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e),document.getElementById("show-comments").style.display="none"}}t=window.location.hash.substr(1),t.length>8&&t.substring(0,8)=="comment-"&&e(),/bot|google|baidu|bing|msn|duckduckgo|slurp|yandex/i.test(navigator.userAgent)&&e()})()</script></main><footer><h6>Copyright © 2016 ~ 2023 - Jay Lau|Theme by <a href=https://github.com/funkydan2/hugo-kiera>kiera</a> |
Rendered by <a href=https://gohugo.io title=Hugo>Hugo</a> |
<a href=https://laujay.com/index.xml>Subscribe</a></h6></footer></div><script src=https://laujay.com/js/scripts.js></script><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-91611718-2","auto"),ga("send","pageview"))</script></body></html>